# https://github.com/dltn/dotfiles/blob/master/.tmux.conf

set -g @plugin 'tmux-plugins/tpm' # tpm package manager
set -g @plugin "nordtheme/tmux"

# - Rebind <PRE> to Ctrl+A (instead of Ctrl+B). This is a mildly contentious choice (screen/emacs),
#   but I like that it keep your fingers near home row alongside a Ctrl+Esc Caps Lock remap.
set-option -g prefix C-a

set -g mouse on # enable mouse mode (tmux 2.1+)
set -g base-index 1 # start windows at 1 since QWERTY is 1234...0
set -g escape-time 0 # No delay for escape key
set -g history-limit 10000 # Bigger scrollback
set -g renumber-windows on # automatically renumber windows when one is closed
set-window-option -g pane-base-index 1 # same as above, for panes
set-window-option -g mode-keys vi # navigate tmux using vim bindings

# - Remap pane splits to more mnemonic shortcuts (https://hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf)
bind | split-window -h -c "#{pane_current_path}" # use '<PRE>|' to split a pane vertically
bind - split-window -v -c "#{pane_current_path}" # use '<PRE>-' to split a pane horizontally

bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

run '~/.tmux/plugins/tpm/tpm' # Initialize tpm (keep before responsive overrides so they take precedence over theme)

# - Responsive status bar: shorten window names and drop date when terminal is narrow (< 80 cols)
set -g status-right '#{?#{e|<:#{client_width},80}, %H:%M , "#{=21:pane_title}" %H:%M %d-%b-%y}'
set -g window-status-format '#{?#{e|<:#{client_width},80},#I:#{=3:window_name} ,#I:#W#{?window_flags,#{window_flags}, }}'
set -g window-status-current-format '#{?#{e|<:#{client_width},80},#I:#{=3:window_name} ,#I:#W#{?window_flags,#{window_flags}, }}'
